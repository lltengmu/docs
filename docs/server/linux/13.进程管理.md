# 进程管理

操作系统都有进程的概念，Windows中在任务管理器中查看，Linux使用`ps -ef`指令查看进程。

## 查看和关闭进程

程序：安装到你电脑或者手机上的程序文件。

进程：正在运行的程序。

1. 查看进程

   ```
   ps -ef
   ```

   输出如下：

   ```
   UID          PID    PPID  C STIME TTY          TIME CMD
   root           1       0  0  2023 ?        00:10:18 /usr/lib/systemd/systemd --switched-root --system --deserialize 17
   root           2       0  0  2023 ?        00:00:05 [kthreadd]
   ```

   + `UID`：全称`user id`，是进程所属用户，也就是哪个用户启动的。
   + `PID`：全称`process id`，是进程编号，每次启动某个程序，他的编号可能都不一样，是启动之后系统随机分配的。
   + `PPID`：全称`parent process id`，父进程，记录的是某个进程是由哪个进程创建出来的。可以使用`pstree`工具查看从属关系。
   + `C`：不用管。
   + `STIME`：全称`start time`，进程启动时间。
   + `TTY`：用于显示哪些进程是本地启动的，哪些是远程连接启动的。可以使用`w`查看哪些终端远程连接主机。
   + `TIME`：没啥用。
   + `CMD`：进程执行了什么任务。

2. 关闭进程

   ```
   kill pid号
   ```

   + 使用进程`id`终止进程

     ```
     kill 2
     ```

   + 批量关闭进程

     ```
     pkill CMD命令名称
     ```

   + `kill -9`

     这个强大和危险的命令强迫进程咋运行时突然终止，进程结束后不能自我清理。危害是导致系统资源无法释放，一般不退家使用，除非其他办法都无效。

   + 如果想把某个远程连接踢下线，可以终止现象`pts`的远程连接的进程的父进程。



## 查看计算机硬件信息

1. 查看`CPU`：

   ```
   lscpu
   ```

2. 查看内存

   ```
   free -h
   ```

3. 查看硬盘命令

   ```
   df -h
   ```

   含有`tmp`的表示是内存给硬盘的空间

4. 查看计算机的`CPU`，内存，进程等信息

   ```
   top
   ```

   输出如下：

   ```
   top - 13:48:09 up 411 days, 17:04,  3 users,  load average: 0.00, 0.02, 0.05
   Tasks: 161 total,   1 running, 160 sleeping,   0 stopped,   0 zombie
   %Cpu(s):  1.0 us,  0.7 sy,  0.0 ni, 97.8 id,  0.2 wa,  0.3 hi,  0.0 si,  0.0 st
   MiB Mem :   1887.4 total,    208.4 free,   1130.4 used,    548.6 buff/cache
   MiB Swap:   1025.0 total,      2.0 free,   1023.0 used.    600.5 avail Mem 
   ```

   + `13:48:09 up 411 days`：表示系统当前时间是`13:48:09`，已经开机了`411 days`。

   + `3 users`：表示当前有三个用户在连接主机。

   + `load average: 0.00, 0.02, 0.05`：平均负载，指的是`CPU`的负载高不高，`CPU`负载高，那么平均负载荷就比较大。

   + `Tasks: 161 total,   1 running, 160 sleeping,   0 stopped,   0 zombie`：表示进程数量，总共 161个，一个正在运行，160 个正在休眠。当`CPU`  内核是是1核的时候，是在所有进程之间来回切换执行，所以只有一个或者怯寒很快的时候会显示2. `0 stopped`表示停止的进程，但是这里一般都是0，因为进程结束之后会在内存中释放。`0 zombie`表示僵尸进程数量，僵尸进程是杀不死的，就是由于各种原因，系统无法自动释放内存的进程，僵尸进程也消耗系统资源。

   + `%Cpu(s):  1.0 us,  0.7 sy,  0.0 ni, 97.8 id,  0.2 wa,  0.3 hi,  0.0 si,  0.0 st`：

     关于`CPU`其他参数不用看，只看`97.8 id`，id是`idle`的缩写，表示`97.8%` 空闲。

   + `MiB Mem :   1887.4 total,    208.4 free,   1130.4 used,    548.6 buff/cache`：

     表示内存使用情况，`1887.4 total`是总内存量，`208.4 free`，表示剩余用量，`1130.4 used`表示已使用量，`buff/cache`表示用作缓存，这个参数不用管。

   + `MiB Swap:   1025.0 total,      2.0 free,   1023.0 used.    600.5 avail Mem `：

     `Swap`表示虚拟内存，这时硬盘分配给内存的一部分空间，为了当内存不足时，临时将硬盘当作内存使用。这个数值是可以自行调整的。一般自动分配就好了，所以这部分也不用管。