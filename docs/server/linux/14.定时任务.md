# 定时任务

定期执行命令，和Windows计划任务是一样的。

## 时间命令

1. 查看系统时间：`date`

2. 格式化输出时间（只查看日期）：

   ```
   date +%F
   ```

3. 格式化输出时间（只查看时间）:

   ```
   data +%T
   ```

4. 自定义输出格式：

   ```
   date +%F\ %T
   ```

5. 修改时间和日期

   ```
   date -s '20240120 14:30:00'
   ```

6. 只修改时间

   ```
   date -s '14:30:00'
   ```

7. 同步时间

   ```
   systemctl restart chronyd
   ```



## 定时任务

**格式：**

```
#定时任务的格式
* * * * *   cmd
分 时 日 月 周   命令
分：0-59
时：0-23
日：0-31
月：1-12
周：1-7
```

1. 每5分钟执行一次

   ```
   */5 * * * *
   ```

2. 没1小时的01分执行一次

   ```
   01 */1 * * *
   ```

3. 每半小时执行一次，下面的意思是每小时的00分和30分个执行一次

   ```
   00,30 */1 * * *
   ```

4. 每天晚上8:00执行一次

   ```
   00 20 * * *
   ```

5. 每月一号晚上8:00执行一次

   ```
   00 20 1 * *
   ```

6. 每年1月1号晚上8:00执行一次

   ```
   00 20 1 1 *
   ```

7. 每周一，周三，周五晚上8:00执行一次

   ```
   00 20 * * 1,3,5
   ```

几个符号的意思：

* "*" ：每分钟
* */5 ：每5分钟
* 05 ：第5分钟



**查看定时任务**：

```
crontab -l
```

**编辑定时任务**

```
crontab -e
```

里面每一行都可以写一个定时任务，也就是可以写多个定时任务

**查看执行定时任务的进程**

```
ps -ef | grep cron
```

**重起定时任务进程**

```
systemctl restart crond
```

**注意：**

如果定时任务指令不生效，就写指令的绝对路径