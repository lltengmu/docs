import{_ as a,c as e,o as p,ae as t}from"./chunks/framework.Dh1jimFm.js";const r=JSON.parse('{"title":"定时任务","description":"","frontmatter":{},"headers":[],"relativePath":"server/linux/14.定时任务.md","filePath":"server/linux/14.定时任务.md","lastUpdated":1734757381000}'),n={name:"server/linux/14.定时任务.md"};function i(l,s,o,c,d,h){return p(),e("div",null,s[0]||(s[0]=[t(`<h1 id="定时任务" tabindex="-1">定时任务 <a class="header-anchor" href="#定时任务" aria-label="Permalink to &quot;定时任务&quot;">​</a></h1><p>定期执行命令，和Windows计划任务是一样的。</p><h2 id="时间命令" tabindex="-1">时间命令 <a class="header-anchor" href="#时间命令" aria-label="Permalink to &quot;时间命令&quot;">​</a></h2><ol><li><p>查看系统时间：<code>date</code></p></li><li><p>格式化输出时间（只查看日期）：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>date +%F</span></span></code></pre></div></li><li><p>格式化输出时间（只查看时间）:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>data +%T</span></span></code></pre></div></li><li><p>自定义输出格式：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>date +%F\\ %T</span></span></code></pre></div></li><li><p>修改时间和日期</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>date -s &#39;20240120 14:30:00&#39;</span></span></code></pre></div></li><li><p>只修改时间</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>date -s &#39;14:30:00&#39;</span></span></code></pre></div></li><li><p>同步时间</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>systemctl restart chronyd</span></span></code></pre></div></li></ol><h2 id="定时任务-1" tabindex="-1">定时任务 <a class="header-anchor" href="#定时任务-1" aria-label="Permalink to &quot;定时任务&quot;">​</a></h2><p><strong>格式：</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>#定时任务的格式</span></span>
<span class="line"><span>* * * * *   cmd</span></span>
<span class="line"><span>分 时 日 月 周   命令</span></span>
<span class="line"><span>分：0-59</span></span>
<span class="line"><span>时：0-23</span></span>
<span class="line"><span>日：0-31</span></span>
<span class="line"><span>月：1-12</span></span>
<span class="line"><span>周：1-7</span></span></code></pre></div><ol><li><p>每5分钟执行一次</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>*/5 * * * *</span></span></code></pre></div></li><li><p>没1小时的01分执行一次</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>01 */1 * * *</span></span></code></pre></div></li><li><p>每半小时执行一次，下面的意思是每小时的00分和30分个执行一次</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>00,30 */1 * * *</span></span></code></pre></div></li><li><p>每天晚上8:00执行一次</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>00 20 * * *</span></span></code></pre></div></li><li><p>每月一号晚上8:00执行一次</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>00 20 1 * *</span></span></code></pre></div></li><li><p>每年1月1号晚上8:00执行一次</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>00 20 1 1 *</span></span></code></pre></div></li><li><p>每周一，周三，周五晚上8:00执行一次</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>00 20 * * 1,3,5</span></span></code></pre></div></li></ol><p>几个符号的意思：</p><ul><li>&quot;*&quot; ：每分钟</li><li>*/5 ：每5分钟</li><li>05 ：第5分钟</li></ul><p><strong>查看定时任务</strong>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>crontab -l</span></span></code></pre></div><p><strong>编辑定时任务</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>crontab -e</span></span></code></pre></div><p>里面每一行都可以写一个定时任务，也就是可以写多个定时任务</p><p><strong>查看执行定时任务的进程</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ps -ef | grep cron</span></span></code></pre></div><p><strong>重起定时任务进程</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>systemctl restart crond</span></span></code></pre></div><p><strong>注意：</strong></p><p>如果定时任务指令不生效，就写指令的绝对路径</p>`,21)]))}const u=a(n,[["render",i]]);export{r as __pageData,u as default};
